/*! 
 Build based on admin-vue 
 Time : 1721439181000 */
import{a as e,o as l,c as a,d as u,w as d,Z as o,$ as t,h as r,b as i,dq as n,ar as m,l as p,E as s}from"./087AC4D233B64EB0index.3a42c3d0.js";import{E as f,a as c}from"./087AC4D233B64EB0collapse-item.12d647b9.js";import{E as v,a as b}from"./087AC4D233B64EB0col.770c29b1.js";import{a as V,E as y}from"./087AC4D233B64EB0form-item.3185fbfe.js";import{E as B}from"./087AC4D233B64EB0switch.f472bc70.js";/* empty css                                 *//* empty css                              *//* empty css                            */import{E as g,a as E}from"./087AC4D233B64EB0select.e68fc9c3.js";import"./087AC4D233B64EB0scrollbar.f28f83ad.js";/* empty css                               *//* empty css                               */import{a as _,t as j}from"./087AC4D233B64EB0stringFun.647a78e9.js";import{W as D}from"./087AC4D233B64EB0warningBar.7ffbb10e.js";import{E as T}from"./087AC4D233B64EB0index.680eed92.js";import"./087AC4D233B64EB0castArray.cde6f052.js";import"./087AC4D233B64EB0index.70cb6f72.js";import"./087AC4D233B64EB0_baseClone.00b8bfb0.js";import"./087AC4D233B64EB0_Uint8Array.55422573.js";import"./087AC4D233B64EB0_initCloneObject.f657614f.js";import"./087AC4D233B64EB0index.3ccbca82.js";import"./087AC4D233B64EB0index.83c0fa4e.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.8c6e2eb6.js";import"./087AC4D233B64EB0isEqual.e78056db.js";import"./087AC4D233B64EB0debounce.c5d6bbb5.js";import"./087AC4D233B64EB0_baseIteratee.5313185f.js";import"./087AC4D233B64EB0index.f44b2100.js";const h=i("span",{style:{"font-size":"12px"}},"自动填充",-1),C=Object.assign({name:"FieldDialog"},{__name:"fieldDialog",props:{dialogMiddle:{type:Object,default:function(){return{}}},typeOptions:{type:Array,default:function(){return[]}},typeSearchOptions:{type:Array,default:function(){return[]}},typeIndexOptions:{type:Array,default:function(){return[]}}},setup(i,{expose:C}){const A=i,U=e([]),S=e({}),x=e([]),N=e({fieldName:[{required:!0,message:"请输入字段英文名",trigger:"blur"}],fieldDesc:[{required:!0,message:"请输入字段中文名",trigger:"blur"}],fieldJson:[{required:!0,message:"请输入字段格式化json",trigger:"blur"}],columnName:[{required:!0,message:"请输入数据库字段",trigger:"blur"}],fieldType:[{required:!0,message:"请选择字段类型",trigger:"blur"}],dataTypeLong:[{validator:(e,l,a)=>{"enum"!=S.value.fieldType||/^('([^']*)'(?:,'([^']+)'*)*)$/.test(l)?a():a(new Error("枚举值校验错误"))},trigger:"blur"}]});(async()=>{S.value=A.dialogMiddle;const e=await n({page:1,pageSize:999999});x.value=e.data})();const w=()=>{S.value.fieldJson=_(S.value.fieldName),S.value.columnName=j(S.value.fieldJson)},O=e=>{const l=S.value.fieldType;return"string"!==l&&"LIKE"===e||"int"!==l&&"time.Time"!==l&&"float64"!==l&&("BETWEEN"===e||"NOT BETWEEN"===e)},q=()=>{S.value.fieldSearchType="",S.value.dictType=""},k=e=>{2===e&&m.confirm("一对多关联模式下，数据类型会改变为数组，后端表现为json，具体表现为数组模式，是否继续？","提示",{confirmButtonText:"继续",cancelButtonText:"取消",type:"warning"}).then((()=>{S.value.fieldType="array"})).catch((()=>{S.value.dataSource.association=1}))},I=e(null);return C({fieldDialogFrom:I}),(e,n)=>{const m=p,_=s,j=V,C=g,A=E,J=T,L=B,F=y,K=v,W=b,z=f,H=c;return l(),a("div",null,[u(D,{title:"id , created_at , updated_at , deleted_at 会自动生成请勿重复创建。搜索时如果条件为LIKE只支持字符串"}),u(F,{ref_key:"fieldDialogFrom",ref:I,model:S.value,"label-width":"120px","label-position":"right",rules:N.value,class:"grid grid-cols-2"},{default:d((()=>[u(j,{label:"字段名称",prop:"fieldName"},{default:d((()=>[u(m,{modelValue:S.value.fieldName,"onUpdate:modelValue":n[0]||(n[0]=e=>S.value.fieldName=e),autocomplete:"off",style:{width:"80%"}},null,8,["modelValue"]),u(_,{style:{width:"18%","margin-left":"2%"},onClick:w},{default:d((()=>[h])),_:1})])),_:1}),u(j,{label:"字段中文名",prop:"fieldDesc"},{default:d((()=>[u(m,{modelValue:S.value.fieldDesc,"onUpdate:modelValue":n[1]||(n[1]=e=>S.value.fieldDesc=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(j,{label:"字段JSON",prop:"fieldJson"},{default:d((()=>[u(m,{modelValue:S.value.fieldJson,"onUpdate:modelValue":n[2]||(n[2]=e=>S.value.fieldJson=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(j,{label:"数据库字段名",prop:"columnName"},{default:d((()=>[u(m,{modelValue:S.value.columnName,"onUpdate:modelValue":n[3]||(n[3]=e=>S.value.columnName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(j,{label:"数据库字段描述",prop:"comment"},{default:d((()=>[u(m,{modelValue:S.value.comment,"onUpdate:modelValue":n[4]||(n[4]=e=>S.value.comment=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),u(j,{label:"字段类型",prop:"fieldType"},{default:d((()=>[u(A,{modelValue:S.value.fieldType,"onUpdate:modelValue":n[5]||(n[5]=e=>S.value.fieldType=e),style:{width:"100%"},placeholder:"请选择字段类型",clearable:"",onChange:q},{default:d((()=>[(l(!0),a(o,null,t(i.typeOptions,(e=>(l(),r(C,{key:e.value,label:e.label,value:e.value,disabled:e.disabled},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue"])])),_:1}),u(j,{label:"enum"===S.value.fieldType?"枚举值":"类型长度",prop:"dataTypeLong"},{default:d((()=>[u(m,{modelValue:S.value.dataTypeLong,"onUpdate:modelValue":n[6]||(n[6]=e=>S.value.dataTypeLong=e),placeholder:"enum"===S.value.fieldType?"例:'北京','天津'":"数据库类型长度"},null,8,["modelValue","placeholder"])])),_:1},8,["label"]),u(j,{label:"字段查询条件",prop:"fieldSearchType"},{default:d((()=>[u(A,{modelValue:S.value.fieldSearchType,"onUpdate:modelValue":n[7]||(n[7]=e=>S.value.fieldSearchType=e),disabled:"json"===S.value.fieldType,style:{width:"100%"},placeholder:"请选择字段查询条件",clearable:""},{default:d((()=>[(l(!0),a(o,null,t(i.typeSearchOptions,(e=>(l(),r(C,{key:e.value,label:e.label,value:e.value,disabled:O(e.value)},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),u(j,{label:"关联字典",prop:"dictType"},{default:d((()=>[u(A,{modelValue:S.value.dictType,"onUpdate:modelValue":n[8]||(n[8]=e=>S.value.dictType=e),style:{width:"100%"},disabled:"string"!==S.value.fieldType,placeholder:"请选择字典",clearable:""},{default:d((()=>[(l(!0),a(o,null,t(x.value,(e=>(l(),r(C,{key:e.type,label:"".concat(e.type,"(").concat(e.name,")"),value:e.type},null,8,["label","value"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),u(j,{label:"默认值"},{default:d((()=>[u(m,{modelValue:S.value.defaultValue,"onUpdate:modelValue":n[9]||(n[9]=e=>S.value.defaultValue=e),placeholder:"请输入默认值"},null,8,["modelValue"])])),_:1}),u(j,{label:"主键"},{default:d((()=>[u(J,{modelValue:S.value.primaryKey,"onUpdate:modelValue":n[10]||(n[10]=e=>S.value.primaryKey=e)},null,8,["modelValue"])])),_:1}),u(j,{label:"索引类型",prop:"fieldIndexType"},{default:d((()=>[u(A,{modelValue:S.value.fieldIndexType,"onUpdate:modelValue":n[11]||(n[11]=e=>S.value.fieldIndexType=e),disabled:"json"===S.value.fieldType,style:{width:"100%"},placeholder:"请选择字段索引类型",clearable:""},{default:d((()=>[(l(!0),a(o,null,t(i.typeIndexOptions,(e=>(l(),r(C,{key:e.value,label:e.label,value:e.value,disabled:O(e.value)},null,8,["label","value","disabled"])))),128))])),_:1},8,["modelValue","disabled"])])),_:1}),u(j,{label:"前端可见"},{default:d((()=>[u(L,{modelValue:S.value.front,"onUpdate:modelValue":n[12]||(n[12]=e=>S.value.front=e)},null,8,["modelValue"])])),_:1}),u(j,{label:"是否排序"},{default:d((()=>[u(L,{modelValue:S.value.sort,"onUpdate:modelValue":n[13]||(n[13]=e=>S.value.sort=e)},null,8,["modelValue"])])),_:1}),u(j,{label:"是否必填"},{default:d((()=>[u(L,{modelValue:S.value.require,"onUpdate:modelValue":n[14]||(n[14]=e=>S.value.require=e)},null,8,["modelValue"])])),_:1}),u(j,{label:"是否可清空"},{default:d((()=>[u(L,{modelValue:S.value.clearable,"onUpdate:modelValue":n[15]||(n[15]=e=>S.value.clearable=e)},null,8,["modelValue"])])),_:1}),u(j,{label:"隐藏查询条件"},{default:d((()=>[u(L,{disabled:!S.value.fieldSearchType,modelValue:S.value.fieldSearchHide,"onUpdate:modelValue":n[16]||(n[16]=e=>S.value.fieldSearchHide=e)},null,8,["disabled","modelValue"])])),_:1}),u(j,{label:"校验失败文案"},{default:d((()=>[u(m,{modelValue:S.value.errorText,"onUpdate:modelValue":n[17]||(n[17]=e=>S.value.errorText=e)},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"]),u(H,{modelValue:U.value,"onUpdate:modelValue":n[22]||(n[22]=e=>U.value=e)},{default:d((()=>[u(z,{title:"数据源配置（此配置为高级配置，如编程基础不牢，可能导致自动化代码不可用）",name:"1"},{default:d((()=>[u(W,{gutter:8},{default:d((()=>[u(K,{span:3},{default:d((()=>[u(A,{modelValue:S.value.dataSource.association,"onUpdate:modelValue":n[18]||(n[18]=e=>S.value.dataSource.association=e),placeholder:"关联模式",onChange:k},{default:d((()=>[u(C,{label:"一对一",value:1}),u(C,{label:"一对多",value:2})])),_:1},8,["modelValue"])])),_:1}),u(K,{span:7},{default:d((()=>[u(m,{modelValue:S.value.dataSource.table,"onUpdate:modelValue":n[19]||(n[19]=e=>S.value.dataSource.table=e),placeholder:"数据源表"},null,8,["modelValue"])])),_:1}),u(K,{span:7},{default:d((()=>[u(m,{modelValue:S.value.dataSource.label,"onUpdate:modelValue":n[20]||(n[20]=e=>S.value.dataSource.label=e),placeholder:"展示用字段"},null,8,["modelValue"])])),_:1}),u(K,{span:7},{default:d((()=>[u(m,{modelValue:S.value.dataSource.value,"onUpdate:modelValue":n[21]||(n[21]=e=>S.value.dataSource.value=e),placeholder:"存储用字端"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}});export{C as default};
