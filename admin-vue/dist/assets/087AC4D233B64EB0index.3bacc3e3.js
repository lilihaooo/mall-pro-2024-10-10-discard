/*! 
 Build based on admin-vue 
 Time : 1721439181000 */
import{y as e,a6 as t,N as n,B as a,D as o,a as r,F as i,C as s,H as l,av as u,o as c,c as m,X as d,Y as p,a0 as v,a4 as f,a9 as B,aw as g,aa as x,r as A,ac as h,u as E,ax as b,as as y,ay as C,m as D,af as j,a8 as w,x as k,h as M,e as I,d as _,b as z,n as L,w as S,V as N,at as T,ag as R}from"./087AC4D233B64EB0index.3a42c3d0.js";import P from"./087AC4D233B64EB0index.58860c43.js";import F from"./087AC4D233B64EB0index.adcc8177.js";import{u as O}from"./087AC4D233B64EB0index.0fa107e9.js";import W from"./087AC4D233B64EB0index.aea57149.js";import{_ as G}from"./087AC4D233B64EB0bottomInfo.45f5d63a.js";import"./087AC4D233B64EB0normalMode.7acbd430.js";/* empty css                             *//* empty css                                *//* empty css                               */import"./087AC4D233B64EB0index.d4af4cb5.js";import"./087AC4D233B64EB0menuItem.c02a2eae.js";import"./087AC4D233B64EB0index.d831c00a.js";import"./087AC4D233B64EB0index.70cb6f72.js";import"./087AC4D233B64EB0index.3ccbca82.js";import"./087AC4D233B64EB0index.f44b2100.js";import"./087AC4D233B64EB0asyncSubmenu.c7c7030f.js";import"./087AC4D233B64EB0headMode.c6c31c69.js";import"./087AC4D233B64EB0combinationMode.a3ea9cdd.js";/* empty css                               */import"./087AC4D233B64EB0scrollbar.f28f83ad.js";import"./087AC4D233B64EB0tools.22f284ea.js";import"./087AC4D233B64EB0index.2ba58728.js";import"./087AC4D233B64EB0drawer.53419836.js";import"./087AC4D233B64EB0overlay.b3cb4214.js";/* empty css                              */import"./087AC4D233B64EB0input-number.4007e58b.js";import"./087AC4D233B64EB0switch.f472bc70.js";import"./087AC4D233B64EB0position.2dcc468e.js";import"./087AC4D233B64EB0debounce.c5d6bbb5.js";import"./087AC4D233B64EB0dialog.8a425e00.js";import"./087AC4D233B64EB0index.df61f6ab.js";import"./087AC4D233B64EB0image-viewer.20dbe01e.js";import"./087AC4D233B64EB0dropdown.3febe836.js";import"./087AC4D233B64EB0castArray.cde6f052.js";import"./087AC4D233B64EB0tab-pane.dd89ee37.js";import"./087AC4D233B64EB0strings.8c6e2eb6.js";import"./087AC4D233B64EB0index.c4687db7.js";const H=e({zIndex:{type:Number,default:9},rotate:{type:Number,default:-22},width:Number,height:Number,image:String,content:{type:t([String,Array]),default:"Element Plus"},font:{type:t(Object)},gap:{type:t(Array),default:()=>[100,100]},offset:{type:t(Array)}});function U(e,t,n=1){const a=document.createElement("canvas"),o=a.getContext("2d"),r=e*n,i=t*n;return a.setAttribute("width","".concat(r,"px")),a.setAttribute("height","".concat(i,"px")),o.save(),[o,a,r,i]}function V(){return function(e,t,n,a,o,r,i,s){const[l,u,c,m]=U(a,o,n);if(e instanceof HTMLImageElement)l.drawImage(e,0,0,c,m);else{const{color:t,fontSize:a,fontStyle:i,fontWeight:s,fontFamily:u,textAlign:m,textBaseline:d}=r,p=Number(a)*n;l.font="".concat(i," normal ").concat(s," ").concat(p,"px/").concat(o,"px ").concat(u),l.fillStyle=t,l.textAlign=m,l.textBaseline=d;const v=Array.isArray(e)?e:[e];null==v||v.forEach(((e,t)=>{l.fillText(null!=e?e:"",c/2,t*(p+3*n))}))}const d=Math.PI/180*Number(t),p=Math.max(a,o),[v,f,B]=U(p,p,n);v.translate(B/2,B/2),v.rotate(d),c>0&&m>0&&v.drawImage(u,-c/2,-m/2);let g=0,x=0,A=0,h=0;const E=c/2,b=m/2;[[0-E,0-b],[0+E,0-b],[0+E,0+b],[0-E,0+b]].forEach((([e,t])=>{const[n,a]=function(e,t){return[e*Math.cos(d)-t*Math.sin(d),e*Math.sin(d)+t*Math.cos(d)]}(e,t);g=Math.min(g,n),x=Math.max(x,n),A=Math.min(A,a),h=Math.max(h,a)}));const y=g+B/2,C=A+B/2,D=x-g,j=h-A,w=i*n,k=s*n,M=2*(D+w),I=j+k,[_,z]=U(M,I);function L(e=0,t=0){_.drawImage(f,y,C,D,j,e,t,D,j)}return L(),L(D+w,-j/2-k/2),L(D+w,+j/2+k/2),[z.toDataURL(),M/n,I/n]}}const $=n({name:"ElWatermark"});const q=f(v(n({...$,props:H,setup(e){const t=e,n={position:"relative"},v=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.color)?n:"rgba(0,0,0,.15)"})),f=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontSize)?n:16})),B=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontWeight)?n:"normal"})),g=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontStyle)?n:"normal"})),x=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.fontFamily)?n:"sans-serif"})),A=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textAlign)?n:"center"})),h=a((()=>{var e,n;return null!=(n=null==(e=t.font)?void 0:e.textBaseline)?n:"hanging"})),E=a((()=>t.gap[0])),b=a((()=>t.gap[1])),y=a((()=>E.value/2)),C=a((()=>b.value/2)),D=a((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[0])?n:y.value})),j=a((()=>{var e,n;return null!=(n=null==(e=t.offset)?void 0:e[1])?n:C.value})),w=()=>{const e={zIndex:t.zIndex,position:"absolute",left:0,top:0,width:"100%",height:"100%",pointerEvents:"none",backgroundRepeat:"repeat"};let n=D.value-y.value,a=j.value-C.value;return n>0&&(e.left="".concat(n,"px"),e.width="calc(100% - ".concat(n,"px)"),n=0),a>0&&(e.top="".concat(a,"px"),e.height="calc(100% - ".concat(a,"px)"),a=0),e.backgroundPosition="".concat(n,"px ").concat(a,"px"),e},k=o(null),M=o(),I=r(!1),_=()=>{M.value&&(M.value.remove(),M.value=void 0)},z=(e,t)=>{var n;k.value&&M.value&&(I.value=!0,M.value.setAttribute("style",function(e){return Object.keys(e).map((t=>"".concat(function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()}(t),": ").concat(e[t],";"))).join(" ")}({...w(),backgroundImage:"url('".concat(e,"')"),backgroundSize:"".concat(Math.floor(t),"px")})),null==(n=k.value)||n.append(M.value),setTimeout((()=>{I.value=!1})))},L=V(),S=()=>{const e=document.createElement("canvas").getContext("2d"),n=t.image,a=t.content,o=t.rotate;if(e){M.value||(M.value=document.createElement("div"));const r=window.devicePixelRatio||1,[i,s]=(e=>{let n=120,a=64;const o=t.image,r=t.content,i=t.width,s=t.height;if(!o&&e.measureText){e.font="".concat(Number(f.value),"px ").concat(x.value);const t=Array.isArray(r)?r:[r],o=t.map((t=>{const n=e.measureText(t);return[n.width,void 0!==n.fontBoundingBoxAscent?n.fontBoundingBoxAscent+n.fontBoundingBoxDescent:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent]}));n=Math.ceil(Math.max(...o.map((e=>e[0])))),a=Math.ceil(Math.max(...o.map((e=>e[1]))))*t.length+3*(t.length-1)}return[null!=i?i:n,null!=s?s:a]})(e),l=e=>{const[t,n]=L(e||"",o,r,i,s,{color:v.value,fontSize:f.value,fontStyle:g.value,fontWeight:B.value,fontFamily:x.value,textAlign:A.value,textBaseline:h.value},E.value,b.value);z(t,n)};if(n){const e=new Image;e.onload=()=>{l(e)},e.onerror=()=>{l(a)},e.crossOrigin="anonymous",e.referrerPolicy="no-referrer",e.src=n}else l(a)}};i((()=>{S()})),s((()=>t),(()=>{S()}),{deep:!0,flush:"post"}),l((()=>{_()}));return u(k,(e=>{I.value||e.forEach((e=>{((e,t)=>{let n=!1;return e.removedNodes.length&&t&&(n=Array.from(e.removedNodes).includes(t)),"attributes"===e.type&&e.target===t&&(n=!0),n})(e,M.value)&&(_(),S())}))}),{attributes:!0,subtree:!0,childList:!0}),(e,t)=>(c(),m("div",{ref_key:"containerRef",ref:k,style:p([n])},[d(e.$slots,"default")],4))}}),[["__file","watermark.vue"]]));const Q=992;function X(e){const t=B();const n=O((function(){if(!document.hidden){const e=document.body.getBoundingClientRect().width-1<Q;t.toggleDevice(e?"mobile":"desktop")}}),100);i((()=>{e&&n()})),g((()=>{!function(e,t,n,a=!1){e.addEventListener&&"function"==typeof e.addEventListener&&e.addEventListener(t,n,a)}(window,"resize",n)})),l((()=>{!function(e,t,n,a=!1){e.removeEventListener&&"function"==typeof e.removeEventListener&&e.removeEventListener(t,n,a)}(window,"resize",n)}))}const Y={class:"bg-gray-50 text-slate-700 dark:text-slate-500 dark:bg-slate-800 w-screen h-screen"},Z={class:"flex flex-row w-full gva-container pt-16"},J={class:"flex-1 p-2 w-0 h-full"},K={id:"gva-base-load-dom",class:"gva-body-h bg-gray-50 dark:bg-slate-800"},ee=Object.assign({name:"GvaLayout"},{__name:"index",setup(e){const t=B(),{config:n,theme:a,device:o}=x(t);X(!0);const s=A({color:"rgba(0, 0, 0, .15)"});h((()=>{s.color="dark"===a.value?"rgba(255,255,255, .15)":"rgba(0, 0, 0, .15)"}));const l=E(),u=b(),d=y();i((()=>{C.on("reload",g),p.loadingInstance&&p.loadingInstance.close()}));const p=D(),v=r(!0);let f=null;const g=async()=>{f&&window.clearTimeout(f),f=window.setTimeout((async()=>{if(u.meta.keepAlive)v.value=!1,await j(),v.value=!0;else{const e=u.meta.title;l.push({name:"Reload",params:{title:e}})}}),400)};return(e,t)=>{const a=q,r=w("router-view");return c(),m("div",Y,[k(n).show_watermark?(c(),M(a,{key:0,font:s,"z-index":9999,gap:[180,150],class:"absolute inset-0 pointer-events-none",content:k(p).userInfo.nickName},null,8,["font","content"])):I("",!0),_(F),z("div",Z,["normal"===k(n).side_mode||"mobile"===k(o)&&"head"==k(n).side_mode||"mobile"===k(o)&&"combination"==k(n).side_mode?(c(),M(P,{key:0})):I("",!0),"combination"===k(n).side_mode&&"mobile"!==k(o)?(c(),M(P,{key:1,mode:"normal"})):I("",!0),z("div",J,[k(n).showTabs?(c(),M(W,{key:0})):I("",!0),z("div",{class:L(["overflow-auto",k(n).showTabs?"gva-container2":"gva-container pt-1"])},[v.value?(c(),M(r,{key:0},{default:S((({Component:e})=>[z("div",K,[_(N,{mode:"out-in",name:"el-fade-in-linear"},{default:S((()=>[(c(),M(T,{include:k(d).keepAliveRouters},[(c(),M(R(e)))],1032,["include"]))])),_:2},1024)])])),_:1})):I("",!0),_(G)],2)])])])}}});export{ee as default};
