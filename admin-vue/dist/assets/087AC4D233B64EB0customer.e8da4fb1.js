/*! 
 Build based on admin-vue 
 Time : 1721439181000 */
import{v as e,a,o as t,c as l,d as o,b as s,w as r,g as u,t as i,x as m,aq as n,ar as p,j as c,E as d,l as B}from"./087AC4D233B64EB0index.3a42c3d0.js";import{E as v}from"./087AC4D233B64EB0drawer.53419836.js";import"./087AC4D233B64EB0overlay.b3cb4214.js";import{a as C,E as D}from"./087AC4D233B64EB0form-item.3185fbfe.js";/* empty css                              */import{E as f}from"./087AC4D233B64EB0pagination.0e771729.js";/* empty css                            */import"./087AC4D233B64EB0select.e68fc9c3.js";import"./087AC4D233B64EB0scrollbar.f28f83ad.js";/* empty css                               */import{E as g,a as j}from"./087AC4D233B64EB0table-column.d8728fc7.js";/* empty css                                 *//* empty css                                *//* empty css                               */import{W as E}from"./087AC4D233B64EB0warningBar.7ffbb10e.js";import"./087AC4D233B64EB0index.3ccbca82.js";import"./087AC4D233B64EB0castArray.cde6f052.js";import"./087AC4D233B64EB0_baseClone.00b8bfb0.js";import"./087AC4D233B64EB0_Uint8Array.55422573.js";import"./087AC4D233B64EB0_initCloneObject.f657614f.js";import"./087AC4D233B64EB0isEqual.e78056db.js";import"./087AC4D233B64EB0index.83c0fa4e.js";import"./087AC4D233B64EB0token.9ae252be.js";import"./087AC4D233B64EB0strings.8c6e2eb6.js";import"./087AC4D233B64EB0debounce.c5d6bbb5.js";import"./087AC4D233B64EB0_baseIteratee.5313185f.js";import"./087AC4D233B64EB0index.f44b2100.js";import"./087AC4D233B64EB0index.680eed92.js";const A=a=>e({url:"/customer/customer",method:"post",data:a}),b={class:"gva-table-box"},h={class:"gva-btn-list"},w={class:"gva-pagination"},y={class:"flex justify-between items-center"},_=s("span",{class:"text-lg"},"客户",-1),k=Object.assign({name:"Customer"},{__name:"customer",setup(k){const x=a({customerName:"",customerPhoneData:""}),I=a(1),V=a(0),z=a(10),N=a([]),P=e=>{z.value=e,q()},U=e=>{I.value=e,q()},q=async()=>{const a=await(t={page:I.value,pageSize:z.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(N.value=a.data.list,V.value=a.data.total,I.value=a.data.page,z.value=a.data.pageSize)};q();const S=a(!1),T=a(""),O=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;T.value="update",0===t.code&&(x.value=t.data.customer,S.value=!0)},F=()=>{S.value=!1,x.value={customerName:"",customerPhoneData:""}},G=async a=>{p.confirm("确定要删除吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(c({type:"success",message:"删除成功"}),1===N.value.length&&I.value>1&&I.value--,q())}))},H=async()=>{let a;switch(T.value){case"create":default:a=await A(x.value);break;case"update":a=await(t=x.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(F(),q())},L=()=>{T.value="create",S.value=!0};return(e,a)=>{const p=d,c=g,A=j,k=f,q=B,T=C,W=D,J=v;return t(),l("div",null,[o(E,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",b,[s("div",h,[o(p,{type:"primary",icon:"plus",onClick:L},{default:r((()=>[u("新增")])),_:1})]),o(A,{ref:"multipleTable",data:N.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(c,{type:"selection",width:"55"}),o(c,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,i(m(n)(e.row.CreatedAt)),1)])),_:1}),o(c,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(c,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(c,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(c,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(p,{type:"primary",link:"",icon:"edit",onClick:a=>O(e.row)},{default:r((()=>[u("变更")])),_:2},1032,["onClick"]),o(p,{type:"primary",link:"",icon:"delete",onClick:a=>G(e.row)},{default:r((()=>[u("删除")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",w,[o(k,{"current-page":I.value,"page-size":z.value,"page-sizes":[10,30,50,100],total:V.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:U,onSizeChange:P},null,8,["current-page","page-size","total"])])]),o(J,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),"before-close":F,"show-close":!1},{header:r((()=>[s("div",y,[_,s("div",null,[o(p,{onClick:F},{default:r((()=>[u("取 消")])),_:1}),o(p,{type:"primary",onClick:H},{default:r((()=>[u("确 定")])),_:1})])])])),default:r((()=>[o(W,{inline:!0,model:x.value,"label-width":"80px"},{default:r((()=>[o(T,{label:"客户名"},{default:r((()=>[o(q,{modelValue:x.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(T,{label:"客户电话"},{default:r((()=>[o(q,{modelValue:x.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>x.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{k as default};
